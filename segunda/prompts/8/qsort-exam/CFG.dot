digraph CFG {
    node [shape=box, style=rounded, fontname="Helvetica"];
    edge [fontname="Helvetica"];

    // Nos (Blocos Basicos)
    B1 [label="B1: Inicializacao\n(i, ir=n, j, k, l=1, jstack=0, flag=0)"];
    B2 [label="B2: Loop Principal\nfor (;;)"];
    B3 [label="B3: if (ir - l < M)"];
    B4 [label="B4: Insertion Sort\nfor (j = l+1; j <= ir; j++)\n..."];
    B5 [label="B5: if (jstack == 0)"];
    B6 [label="B6: Pop Stack\nir = istack[jstack--];\nl = istack[jstack--];"];
    B7 [label="B7: Particao\nk = (l+ir) >> 1;\nSWAP(...);\n..."];
    B8 [label="B8: Inner Loop\nfor (;;)\ni++; j--;"];
    B9 [label="B9: if (j < i)"];
    B10 [label="B10: SWAP(arr[i], arr[j])"];
    B11 [label="B11: Atualizacoes Finais\narr[l+1]=arr[j];\narr[j]=a;\njstack+=2;"];
    B12 [label="B12: if (ir-i+1 >= j-l)"];
    B13 [label="B13: Push Stack (Caso True)\nistack[jstack]=ir;\n..."];
    B14 [label="B14: Push Stack (Caso False)\nistack[jstack]=j-1;\n..."];
    B15 [label="B15: Fim"];

    // Arestas (Fluxo de Controle)
    B1 -> B2;
    B2 -> B3;
    B3 -> B4 [label="True"];
    B3 -> B7 [label="False"];
    B4 -> B5;
    B5 -> B15 [label="True (Break)"];
    B5 -> B6 [label="False"];
    B6 -> B2;
    B7 -> B8;
    B8 -> B9;
    B9 -> B11 [label="True (Break)"];
    B9 -> B10 [label="False"];
    B10 -> B8;
    B11 -> B12;
    B12 -> B13 [label="True"];
    B12 -> B14 [label="False"];
    B13 -> B2;
    B14 -> B2;
}